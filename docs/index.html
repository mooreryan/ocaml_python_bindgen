<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Installation and usage instructions for pyml_bindgen, a program to generate OCaml bindings for Python classes via pyml.">
  <meta name="author" content="Ryan M. Moore">
  <link rel="canonical" href="https://mooreryan.github.io/ocaml_python_bindgen/">
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>pyml_bindgen -- OCaml-Python Bindings Generator</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "pyml_bindgen";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = "/ocaml_python_bindgen/";
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/ocaml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/python.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  

  

  

  
    
  


<meta property="og:site_name" content="pyml_bindgen -- OCaml-Python Bindings Generator" />

<meta property="og:type" content="website">

<meta property="og:title" content="pyml_bindgen -- OCaml-Python Bindings Generator">

<meta property="description" content="Installation and usage instructions for pyml_bindgen, a program to generate OCaml bindings for Python classes via pyml.">
<meta property="og:description" content="Installation and usage instructions for pyml_bindgen, a program to generate OCaml bindings for Python classes via pyml.">
<meta name="twitter:description" content="Installation and usage instructions for pyml_bindgen, a program to generate OCaml bindings for Python classes via pyml.">

<meta property="og:url" content="https://mooreryan.github.io/ocaml_python_bindgen/">

<meta property="og:locale" content="en_US">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="pyml_bindgen -- OCaml-Python Bindings Generator">

  

  
<meta name="google-site-verification" content="lAMnqKIoNocjUOHIuFkaXcMzcceqyGBcevAs7t3N_AI" />
  


</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> pyml_bindgen -- OCaml-Python Bindings Generator</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">pyml_bindgen</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#how-to-get-started">How to get started</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installing">Installing</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick start</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#license">License</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#software">Software</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Examples & Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="getting-started/">Getting Started</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="matplotlib/">Matplotlib Example</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="matplotlib-2/">Matplotlib Example 2</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Rules</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="types/">Types</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="names/">Function & Argument Names</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="attributes/">Attributes & Properties</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="instance-methods/">Instance Methods</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="static-methods/">Class & Static Methods</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Miscellaneous</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="of-pyobject/">Converting `pyobjects` to OCaml types</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="no-functions/">You can only bind methods, not functions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="tuples/">Handling Tuples</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="gotchas-bugs/">Gotchas & Known Bugs</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">pyml_bindgen -- OCaml-Python Bindings Generator</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>pyml_bindgen</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mooreryan/ocaml_python_bindgen/edit/main/_docs_src/src/index.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="ocaml-python-bindings-generator">OCaml-Python Bindings Generator</h1>
<!-- [![Build and Test](https://github.com/mooreryan/ocaml_python_bindgen/actions/workflows/build_and_test.yml/badge.svg?branch=main)](https://github.com/mooreryan/ocaml_python_bindgen/actions/workflows/build_and_test.yml) [![Build and Test Static](https://github.com/mooreryan/ocaml_python_bindgen/actions/workflows/build_and_test_static.yml/badge.svg?branch=main)](https://github.com/mooreryan/ocaml_python_bindgen/actions/workflows/build_and_test_static.yml) [![Generate Docs](https://github.com/mooreryan/ocaml_python_bindgen/actions/workflows/generate_docs.yml/badge.svg?branch=main)](https://github.com/mooreryan/ocaml_python_bindgen/actions/workflows/generate_docs.yml) -->

<p><a href="https://github.com/mooreryan/ocaml_python_bindgen"><img alt="code on GitHub" src="https://img.shields.io/badge/code-GitHub-blue" /></a> </p>
<!-- [![GitHub issues](https://img.shields.io/github/issues/mooreryan/ocaml_python_bindgen)](https://github.com/mooreryan/ocaml_python_bindgen/issues)  -->

<!-- [![Coverage Status](https://coveralls.io/repos/github/mooreryan/ocaml_python_bindgen/badge.svg?branch=main)](https://coveralls.io/github/mooreryan/ocaml_python_bindgen?branch=main) -->

<p>Generate Python bindings with <a href="https://github.com/thierry-martinez/pyml">pyml</a> directly from OCaml value specifications.</p>
<p>While you <em>could</em> write all your Python bindings by hand, it can be tedious and it gets old real quick.  While <code>pyml_bindgen</code> can't yet auto-generate all the bindings you may need, it can definitely take care of a lot of the tedious and repetitive work you need to do when writing bindings for a big Python library!! ðŸ’–</p>
<h2 id="how-to-get-started">How to get started</h2>
<p>Getting started with a new package or library and going through lots of docs can be frustrating.  Here's the order I would suggest you look at these docs</p>
<ul>
<li>Read the installing and quick start sections of this page.</li>
<li>Then read through the <a href="getting-started/">getting started</a> tutorial.  If you only read one page in the docs, make it this one!  It explains most of what you need to know to get started with a simple example, while not getting bogged down in too much details.</li>
<li>Next, you can either peruse the <a href="todo/">rules</a> for writing value specifications that <code>pyml_bindgen</code> can understand, or check out <a href="todo/">more examples</a>.</li>
</ul>
<p>If you have any questions or issues, please <a href="https://github.com/mooreryan/ocaml_python_bindgen/issues">let me know</a> about it on GitHub!</p>
<h2 id="installing">Installing</h2>
<p><code>pyml_bindgen</code> is a <a href="https://dune.readthedocs.io/en/stable/">Dune</a> project, so you <em>should</em> be able to clone the repository and build it with <code>dune</code> as long as you have the proper dependencies installed ðŸ¤ž</p>
<pre><code>$ git clone https://github.com/mooreryan/pyml_bindgen.git
$ cd pyml_bindgen
$ opam install . --deps-only --with-doc --with-test
$ dune test &amp;&amp; dune build --profile=release &amp;&amp; dune install
$ pyml_bindgen --help
... help screen should show up ...
</code></pre>
<h2 id="quick-start">Quick start</h2>
<p><code>pyml_bindgen</code> is a CLI program that generates OCaml modules that bind Python classes via <a href="TODO">pyml</a>.</p>
<p>Here's a small example.  Take a Python class, <code>Thing</code>.  (Put it in a file called <code>thing.py</code>...this means the Python module will be called <code>thing</code>.)</p>
<pre><code class="language-python">class Thing:
    def __init__(self, x):
        self.x = x

    def add(self, y):
        return self.x + y
</code></pre>
<p>Now, look at your Python class and decide how you would like to use this class on the OCaml side.</p>
<p>For now, we will just do a direct translation, keeping in mind the <a href="TODO">rules</a> for writing value specs that <code>pyml_bindgen</code> can process.  Maybe something like this.  (Put it in a file called <code>val_specs.txt</code>.)</p>
<pre><code class="language-ocaml">val __init__ : x:int -&gt; unit -&gt; t

val x : t -&gt; int

val add : t -&gt; y:int -&gt; unit -&gt; int
</code></pre>
<p>Finally, to generate the OCaml code, run the <code>pyml_bindgen</code> program.  There are a couple of options you can choose, but let's just keep it simple for now.</p>
<pre><code>$ pyml_bindgen val_specs.txt thing Thing --caml-module=Thing &gt; lib.ml
$ ocamlformat --enable-outside-detected-project lib.ml
</code></pre>
<p>And here's the output of the <code>ocamlformat</code> command.</p>
<pre><code class="language-ocaml">let filter_opt l = List.filter_map Fun.id l

module Thing : sig
  type t

  val of_pyobject : Pytypes.pyobject -&gt; t option

  val to_pyobject : t -&gt; Pytypes.pyobject

  val __init__ : x:int -&gt; unit -&gt; t

  val x : t -&gt; int

  val add : t -&gt; y:int -&gt; unit -&gt; int
end = struct
  let import_module () = Py.Import.import_module &quot;thing&quot;

  type t = Pytypes.pyobject

  let is_instance pyo =
    let py_class = Py.Module.get (import_module ()) &quot;Thing&quot; in
    Py.Object.is_instance pyo py_class

  let of_pyobject pyo = if is_instance pyo then Some pyo else None

  let to_pyobject x = x

  let __init__ ~x () =
    let callable = Py.Module.get (import_module ()) &quot;Thing&quot; in
    let kwargs = filter_opt [ Some (&quot;x&quot;, Py.Int.of_int x) ] in
    of_pyobject @@ Py.Callable.to_function_with_keywords callable [||] kwargs

  let x t = Py.Int.to_int @@ Py.Object.find_attr_string t &quot;x&quot;

  let add t ~y () =
    let callable = Py.Object.find_attr_string t &quot;add&quot; in
    let kwargs = filter_opt [ Some (&quot;y&quot;, Py.Int.of_int y) ] in
    Py.Int.to_int @@ Py.Callable.to_function_with_keywords callable [||] kwargs
end
</code></pre>
<p>Check out the <a href="TODO">examples</a> for more info about using and running <code>pyml_bindgen</code>.  Then, check out the <a href="TODO">rules</a> that you have to follow when writing value specifications that <code>pyml_bindgen</code> can read.</p>
<h2 id="license">License</h2>
<h3 id="software">Software</h3>
<p><a href="https://github.com/mooreryan/ocaml_python_bindgen"><img alt="license MIT or Apache
2.0" src="https://img.shields.io/badge/license-MIT%20or%20Apache%202.0-blue" /></a></p>
<p>Copyright (c) 2021 Ryan M. Moore.</p>
<p>Licensed under the Apache License, Version 2.0 or the MIT license, at your option. This program may not be copied, modified, or distributed except according to those terms.</p>
<h3 id="documentation">Documentation</h3>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
</a></p>
<p>Copyright (c) 2021 Ryan M. Moore.</p>
<p>This documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting-started/" class="btn btn-neutral float-right" title="Getting Started">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/mooreryan/ocaml_python_bindgen/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
      <span><a href="getting-started/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.2.3
Build Date UTC : 2021-10-21 04:24:09.607214+00:00
-->
